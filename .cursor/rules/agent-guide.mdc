---
alwaysApply: true
description: ××“×¨×™×š ×”×¢×•×–×¨ ×”×¨××©×™ - ×›×œ×œ×™× ×•×¢×§×¨×•× ×•×ª ×§×¨×™×˜×™×™× (×’×¨×¡×” ××§×•×¦×¨×ª)
---

# ğŸ“˜ ××“×¨×™×š ×”×¢×•×–×¨ - ×¡×“×¨ ×™×•× ×•×™×–×•××œ×™

> **×’×¨×¡×” ××§×•×¦×¨×ª** - ×œ×¤×¨×˜×™× ××œ××™× ×¨××” [agent-guide-extended.mdc](agent-guide-extended.mdc)

---

## ğŸ¯ ××˜×¨×•×ª ×”×¤×¨×•×™×§×˜ (Project Goals)

**"×¡×“×¨ ×™×•× ×•×™×–×•××œ×™"** - ×›×œ×™ ×“×™×’×™×˜×œ×™ ×œ× ×™×”×•×œ ×¡×“×¨ ×™×•× ×¢×‘×•×¨ ×™×œ×“×™× ×¢× **××•×˜×™×–× + ×ª×¡××•× ×ª ×“××•×Ÿ**.

### ××˜×¨×•×ª ×¢×™×§×¨×™×•×ª

1. **×¢×¦×××•×ª**: ×¦××¦×•× ×ª×œ×•×ª ×‘××‘×•×’×¨×™×
2. **××›×©×™×¨ × ×§×™**: ×× ×™×¢×ª ×’×™×©×” ×œ×™×•×˜×™×•×‘ ×•××¤×œ×™×§×¦×™×•×ª ××¡×™×—×•×ª ×“×¢×ª
3. **××©×•×‘ ×—×™×•×‘×™**: ×—×™×–×•×§×™× ×•×™×–×•××œ×™×™× ×•×§×•×œ×™×™× ××™×“×™×™×
4. **×× ×™×¢×ª ×œ×•×¤×™×**: ××©×•×‘ **×¨× ×“×•××œ×™** ×œ×× ×™×¢×ª ××§×•×œ×œ×™×” (×—×–×¨×ª×™×•×ª)
5. **×•×“××•×ª ×•×¡×“×¨**: ××‘× ×” ×‘×¨×•×¨ ×•×¦×¤×•×™ (×¢×§×¨×•× ×•×ª TEACCH)

### ×”×§×©×¨ ×—×©×•×‘

- **×”××¡××š ×”×–×”** ××¡×¤×§ ××ª ×›×œ ×”×”×§×©×¨ ×”×¤×“×’×•×’×™ ×•×”××©×¤×—×ª×™
- **××™×Ÿ ×¦×•×¨×š ×œ×§×¨×•×** ××ª `docs/private-docs/××¤×™×•×Ÿ ×•×ª×›× ×•×Ÿ ×©×œ ×›×œ×™× ×“×™×’×™×˜×œ×™×™×.md` ×‘×›×œ ××©×™××”, ××š ×‘×©×¢×ª ×”×¦×•×¨×š ×”×•× ×™×›×•×œ ×œ×ª×ª ×”×§×©×¨ ×—×©×•×‘.
- ×”×™×œ×“×™×: ×ª××¨ (×‘×ª), ×™×•× ×ª×Ÿ (×‘×Ÿ), ××¨×™××œ (×‘×Ÿ)
- ×‘×¢×™×” ××¨×›×–×™×ª: ×›× ×™×¡×” ×œ-"×œ×•×¤×™×" (××§×•×œ×œ×™×”) ×¢× ×™×•×˜×™×•×‘
- ×¤×ª×¨×•×Ÿ: ××›×©×™×¨ ×™×™×¢×•×“×™ (Kiosk Mode) + ××©×•×‘ ×¨× ×“×•××œ×™

---

## ğŸ› ï¸ ×¡×˜××§ ×˜×›× ×•×œ×•×’×™ (Tech Stack)

- **Framework**: SvelteKit + Svelte 5 (Runes: `$state`, `$derived`, `$effect`)
- **Deployment**: Cloudflare Pages
- **Storage**: localStorage (JSON) + IndexedDB (×ª××•× ×•×ª)
- **Backup**: Google Drive API v3 (OAuth2, Serverless)
- **Audio**: Web Audio API + TTS fallback
- **Images**: Canvas API, Crop system

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” (Architecture)

### ×”××‘× ×” ×‘×©×œ×•×© ×©×›×‘×•×ª

```
View Layer (routes/, components/)    â† ×§×•××¤×•× × ×˜×•×ª "×˜×™×¤×©×•×ª" (×¨×§ ×”×¦×’×”)
              â†“
Logic Layer (logic/)                 â† Controllers (Topic-Based)
              â†“
Data Layer (stores/)                 â† State Management + Persistence
```

### ×¢×§×¨×•× ×•×ª ×§×¨×™×˜×™×™×

#### 1. Single Source of Truth (SSOT)

- **× ×ª×•× ×™× ×¡×˜×˜×™×™×**: ×¨×§ ×‘-`src/lib/data/defaults.ts`
- **×˜×§×¡×˜×™×**: ×¨×§ ×‘-`src/lib/data/texts.ts`
- **××™×’×¨×¦×™×•×ª**: ×¨×§ ×‘-`src/lib/services/migration.ts`

**×—×œ ××™×¡×•×¨ ××•×—×œ×˜ ×¢×œ:**
- ×˜×§×¡×˜×™× ×‘×¢×‘×¨×™×ª ×‘-components
- ×©×›×¤×•×œ × ×ª×•× ×™×
- ×”×’×“×¨×ª activities/lists ××—×•×¥ ×œ-defaults.ts

#### 2. Controllers Topic-Based (×œ× Page-Based!)

```typescript
// âœ… × ×›×•×Ÿ
TasksBoardController      // ×× ×”×œ: ××©×™××•×ª, ×—×’×™×’×•×ª, iframe
ListsNavigationController // ×× ×”×œ: ×”×—×œ×¤×ª ×¨×©×™××•×ª
BackupController          // ×× ×”×œ: ×’×™×‘×•×™ ××•×˜×•××˜×™

// âŒ ×œ× × ×›×•×Ÿ
HomePageController        // ×™×•×ª×¨ ××“×™ ××—×¨×™×•×ª
SettingsPageController    // ××¢×•×¨×‘ ××“×™
```

#### 3. ×”×¤×¨×“×ª ×œ×•×’×™×§×” ××ª×¦×•×’×”

**×¢×§×¨×•×Ÿ:** ×§×•××¤×•× × ×˜×•×ª ××ª××§×“×•×ª ×‘×”×¦×’×”, Controllers ×× ×”×œ×™× ×œ×•×’×™×§×”.

**×¡×¤×§×˜×¨×•×:**
- âœ… **×ª×¦×•×’×” ×¤×©×•×˜×”** - ×™×›×•×œ ×œ×”×™×©××¨ ×‘×§×•××¤×•× × ×˜×” (if/else, map, formatting)
- âš ï¸ **× ×™×”×•×œ UI State** - ×ª×œ×•×™ ×‘××•×¨×›×‘×•×ª (××•×“××œ ×¤×©×•×˜ OK, ××•×¨×›×‘ â†’ Controller)
- âŒ **×œ×•×’×™×§×” ×¢×¡×§×™×ª** - ×—×™×™×‘ ×œ×”×™×•×ª ×‘-Controller (×—×™×©×•×‘×™×, API, stores)

```svelte
<!-- âœ… × ×›×•×Ÿ - ×œ×•×’×™×§×” ×‘-Controller -->
<script>
  import { TasksBoardController } from '$lib/logic/tasksBoard.svelte';
  const controller = new TasksBoardController();
</script>

<button onclick={() => controller.toggleTask(task.id)}>
  {task.name}
</button>

<!-- âŒ ×œ× × ×›×•×Ÿ - ×œ×•×’×™×§×” ×¢×¡×§×™×ª ×‘×§×•××¤×•× × ×˜×” -->
<script>
  function handleClick() {
    const task = tasks.find(...);
    const nextTask = tasks[tasks.indexOf(task) + 1];
    playAudio(...);
    updateStore(...);
    // ... ×œ×•×’×™×§×” ××•×¨×›×‘×ª = ××¡×•×¨!
  }
</script>
```

**×›×œ×œ ××¦×‘×¢:** ×× ×™×© ×™×•×ª×¨ ×-5 ×©×•×¨×•×ª ×œ×•×’×™×§×” ×‘×¤×•× ×§×¦×™×” â†’ ×”×¢×‘×¨ ×œ-Controller

#### 4. ×ª××•× ×•×ª - ×©×™××•×© ×¨×§ ×“×¨×š ImageDisplay!

**×›×œ×œ ×§×¨×™×˜×™:** ×›×œ ×©×™××•×© ×‘×ª××•× ×” ××”-DB ×—×™×™×‘ ×œ×”×™×•×ª ×“×¨×š `ImageDisplay.svelte`!

```svelte
<!-- âœ… × ×›×•×Ÿ - ImageDisplay ×˜×™×¤×•×œ ××•×˜×•××˜×™ -->
<script>
  import ImageDisplay from '$lib/components/ImageDisplay.svelte';
</script>

<div style="width: 120px; height: 120px;">
  <ImageDisplay imageSrc={task.imageSrc} alt={task.name} />
</div>

<!-- âŒ ×œ× × ×›×•×Ÿ - ×’×™×©×” ×™×©×™×¨×” ×œ×ª××•× ×” -->
<img src={task.imageSrc} alt={task.name} />

<!-- âŒ ×œ× × ×›×•×Ÿ - ×œ×•×’×™×§×ª crop ×™×“× ×™×ª -->
<script>
  import { useDbImage } from '$lib/actions/dbImage';
  // ... ×§×•×“ crop ×™×“× ×™
</script>
```

**×œ××”?**
- `ImageDisplay` ××˜×¤×œ ×‘×›×œ ×”×œ×•×’×™×§×”: IndexedDB, Crop, Fallback
- ×¢×§×‘×™×•×ª ××œ××” ×‘×›×œ ×”××¢×¨×›×ª
- ×ª×—×–×•×§×” ×§×œ×” - ×©×™× ×•×™ ×‘××§×•× ××—×“

---

## ğŸ“Š ×™×©×•×™×•×ª ××¨×›×–×™×•×ª

### AppState

```typescript
interface AppState {
  version: number;                     // ×’×¨×¡×” × ×•×›×—×™×ª: 7
  users: UserProfile[];
  lists: { [userId: string]: List[] };
  images: { [imageId: string]: ImageMetadata }; // Normalized!
  activeListId: { [userId: string]: string };
  currentUserId: string | null;
  settings: { lastActiveTime: number };
  lastModified: number;                // ×œ×–×™×”×•×™ ×§×•× ×¤×œ×™×§×˜×™×
}
```

### Task

```typescript
interface Task {
  id: string;
  name: string;
  imageSrc: string | null;           // "idb:xxx" ××• URL
  isDone: boolean;
  communicationBoardUrl?: string;    // ×§×™×©×•×¨ ×œ×œ×•×— ×ª×§×©×•×¨×ª
  changeType?: 'cancelled' | 'added'; // ××©×™××ª ×©×™× ×•×™
}
```

### ImageMetadata - Normalized Data!

```typescript
interface ImageMetadata {
  crop?: {
    x: number;      // 0-100 (××—×•×–×™×)
    y: number;      // 0-100 (××—×•×–×™×)
    scale: number;  // ×™×—×¡×™ ×œ-minScale! (1.0 = minScale, 2.0 = ×¤×™ 2)
  };
}
```

**×—×©×•×‘:** `Task.imageSrc` ×”×•× ×¨×§ ××–×”×” (string). ×”××˜××“×˜×” ×‘-`AppState.images[id]`.

---

## ğŸ”§ ×× ×’× ×•× ×™× ××™×•×—×“×™×

> **×œ×¤×¨×˜×™× ××œ××™× ×¨××”:** [agent-guide-extended.mdc](agent-guide-extended.mdc)

### 1. ××©×•×‘ ×§×•×œ×™ (Hybrid Audio)
- MP3 preferred, TTS fallback
- ×¨×¦×£: "×¡×™×™××ª" â†’ ×—×™×–×•×§ ×¨× ×“×•××œ×™ â†’ "×¢×›×©×™×•..."
- **×—×©×•×‘:** ××©×•×‘ ×¨× ×“×•××œ×™ ×œ×× ×™×¢×ª ××§×•×œ×œ×™×”!

### 2. ××©×™××•×ª ×©×™× ×•×™ (Change Tasks)
- `changeType: 'cancelled'` - ğŸš« ××©×™××” ××‘×•×˜×œ×” (×¨×§ ×”×§×¨××”)
- `changeType: 'added'` - âœ¨ ×¤×¢×™×œ×•×ª ×—×“×©×” (×¢×•×‘×“ ×›×¨×’×™×œ)

### 3. Image Crop System
- Scale **×™×—×¡×™** (`1.0 = minScale`, ×œ× ××•×—×œ×˜!)
- `ImageDisplay` - ×ª×¦×•×’×” ××—×™×“×”
- `ImageCropEditor` - ×¢×•×¨×š ××™× ×˜×¨××§×˜×™×‘×™

### 4. Google Drive Backup
- Serverless OAuth2
- Hydration/Dehydration (×ª××•× ×•×ª â†’ data URLs)
- ×–×™×”×•×™ ×§×•× ×¤×œ×™×§×˜×™× (`lastModified`)
- ×’×™×‘×•×™ ××•×˜×•××˜×™ (Debounce 5s)

---

## ğŸ“š ×ª×™×¢×•×“ - ×—×•×‘×” ×œ×¢×“×›×Ÿ!

### walkthrough.md - ×™×•××Ÿ ×”×¤×™×ª×•×—

**×—×•×‘×” ×œ×¢×“×›×Ÿ ×‘×¡×™×•× ×›×œ ××©×™××”!**

**×—×©×•×‘:** ×œ×¤× ×™ ×¢×“×›×•×Ÿ ×”-walkthrough, ×”×©×ª××© ×‘×¤×§×•×“×” `Get-Date -Format "yyyy-MM-dd HH:mm"` (PowerShell) ××• `date +"%Y-%m-%d %H:%M"` (Bash) ×›×“×™ ×œ×§×‘×œ ××ª ×”×ª××¨×™×š ×•×”×©×¢×” ×”× ×•×›×—×™×™× ×”××“×•×™×§×™×.

**×¤×•×¨××˜:**
```markdown
## [×ª××¨×™×š] [×©×¢×”]

### [×›×•×ª×¨×ª ×”××©×™××”]

[×ª×™××•×¨ ×›×œ×œ×™]

---

#### ××” ×‘×•×¦×¢?

**1. [×¨×›×™×‘ ×¨××©×•×Ÿ]**

- ×¤×™×¨×•×˜
- **×§×‘×¦×™× ×©× ×•×¦×¨×•**: `path/to/file.ts`
- **×§×‘×¦×™× ×©×©×•× ×•**: `path/to/existing.svelte`

---

#### ×”×—×œ×˜×•×ª ××¨×›×™×˜×§×˜×•×¨×”

- **[×”×—×œ×˜×”]**: [× ×™××•×§]

---

#### ××¢×§×¤×™× ×•×¤×ª×¨×•× ×•×ª

- **[×‘×¢×™×”]**: [×¤×ª×¨×•×Ÿ]
```

### features-status.md

×¢×“×›×Ÿ **×¨×§** ×›×©×¤×™×¦'×¨ ×”×•×©×œ× ××œ×!

---

## ğŸ“ ×›×œ×œ×™ ×§×•×“ ×§×¨×™×˜×™×™×

### ×©×¤×”

- **×¢×‘×¨×™×ª**: ×”×¢×¨×•×ª ×‘×§×•×“, ××¡××›×™×, commits, ×”×•×“×¢×•×ª ×œ××©×ª××©
- **×× ×’×œ×™×ª**: ×©××•×ª ××©×ª× ×™×, ×¤×•× ×§×¦×™×•×ª, ××—×œ×§×•×ª, ×§×‘×¦×™×

```typescript
// âœ… × ×›×•×Ÿ
// ×¤×•× ×§×¦×™×” ×œ×—×™×©×•×‘ ×”××©×™××” ×”×¤×¢×™×œ×”
function getActiveTaskIndex(tasks: Task[]): number { ... }

// âŒ ×œ× × ×›×•×Ÿ - ×”×¢×¨×” ×‘×× ×’×œ×™×ª
// Function to calculate active task
function getActiveTaskIndex(tasks: Task[]): number { ... }
```

### Svelte 5 Runes

**×—×•×‘×”!** ×œ× Svelte 4!

```typescript
// âœ… × ×›×•×Ÿ - Svelte 5
let count = $state(0);
let doubled = $derived(count * 2);

$effect(() => {
  console.log('Count changed:', count);
});

// âŒ ×œ× × ×›×•×Ÿ - Svelte 4
let count = 0; // ×œ× ×¨×™××§×˜×™×‘×™!
$: doubled = count * 2;
```

### Tailwind CSS - ×’×™×©×” ×”×™×‘×¨×™×“×™×ª

**×¢×§×¨×•×Ÿ:** ×§×•××¤×•× × ×˜×•×ª CSS ×œ×“×‘×¨×™× ×©×—×•×–×¨×™×, @apply ×œ×“×‘×¨×™× ××•×¨×›×‘×™× ×—×“-×¤×¢××™×™×, Tailwind ×™×©×™×¨×•×ª ×œ×“×‘×¨×™× ×¤×©×•×˜×™×.

#### ×©×œ×•×©×ª ×”××§×¨×™×:

**1. ×§×•××¤×•× × ×˜×•×ª ×—×•×–×¨×•×ª (3+ ×¤×¢××™×)**

×¢×‘×•×¨ ××œ×× ×˜×™× ×©**×—×•×–×¨×™× ×¢×œ ×¢×¦×× 3+ ×¤×¢××™×** ××• ××•×¨×›×‘×™×:

```css
/* âœ… ×§×•××¤×•× × ×˜×” ×‘-settings.css - ×—×•×–×¨×ª ×”×¨×‘×” */
@import '../layout.css';

@layer components {
  .user-card {
    @apply bg-white border border-slate-200 rounded-2xl p-6 
           flex flex-col items-center gap-4 shadow-md;
  }
  
  .users-grid {
    @apply grid gap-6 w-full;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  }
}
```

**2. ××•×¨×›×‘ (5+ classes) ××‘×œ ×—×“-×¤×¢××™**

×¢×‘×•×¨ styling **××•×¨×›×‘ ×©××•×¤×™×¢ ×¨×§ ×¤×¢× ××—×ª**:

```svelte
<style>
  @reference "tailwindcss";
  
  /* âœ… ××•×¨×›×‘ ××‘×œ ×—×“-×¤×¢××™ - @apply ×‘×§×•××¤×•× × ×˜×” */
  .special-layout {
    @apply flex flex-col gap-4 p-8 bg-white rounded-lg 
           shadow-xl border-2 border-blue-500;
  }
  
  .unique-grid {
    @apply grid gap-8 mb-6;
    grid-template-columns: 2fr 1fr;
  }
</style>
```

**3. ×¤×©×•×˜/×§×˜×Ÿ (1-4 classes)**

×¢×‘×•×¨ styling **×—×“-×¤×¢××™ ××• ×¤×©×•×˜**:

```svelte
<!-- âœ… Tailwind ×™×©×™×¨×•×ª - ×“×‘×¨×™× ×§×˜× ×™× -->
<div class="flex gap-2 mt-4">
  <span class="text-sm text-gray-500">×¤×¨×˜×™×</span>
  <div class="space-y-2">...</div>
</div>
```

#### ×›×œ×œ ××¦×‘×¢ - ××ª×™ ×œ×”×©×ª××©?

| ××¦×‘ | ×¤×ª×¨×•×Ÿ | ××™×§×•× | ×“×•×’××” |
|-----|--------|-------|-------|
| ×—×•×–×¨ 3+ ×¤×¢××™× | **CSS Component** | `settings.css` | `.user-card` (10 ×›×¨×˜×™×¡×™×) |
| ××•×¨×›×‘ (5+ classes) ×—×“-×¤×¢××™ | **@apply ×‘-`<style>`** | ×§×•××¤×•× × ×˜×” | `.special-layout` |
| ×¤×©×•×˜ (1-4 classes) | **Tailwind ×™×©×™×¨×•×ª** | HTML | `class="flex gap-2"` |
| Layout ×§×˜×Ÿ | **Tailwind ×™×©×™×¨×•×ª** | HTML | `class="mt-4 space-y-2"` |

#### ×“×•×’××” ××©×•×œ×‘×ª:

```svelte
<script>
  const users = [...];
</script>

<style>
  @reference "tailwindcss";
  
  /* ×“×£ ×–×” ×‘×œ×‘×“ - header ××™×•×—×“ */
  .users-page-header {
    @apply flex justify-between items-center 
           bg-gradient-to-r from-blue-50 to-purple-50 
           p-6 rounded-xl mb-8 shadow-sm;
  }
</style>

<!-- ×§×•××¤×•× × ×˜×” ××¨×›×–×™×ª - ××•×’×“×¨×ª ×‘-settings.css -->
<div class="page-container">
  
  <!-- styling ×—×“-×¤×¢××™ ××•×¨×›×‘ - @apply ×‘×§×•××¤×•× × ×˜×” -->
  <header class="users-page-header">
    <h2 class="page-header">××©×ª××©×™×</h2>
    
    <!-- styling ×¤×©×•×˜ - Tailwind ×™×©×™×¨×•×ª -->
    <div class="flex gap-2">
      <button class="btn btn-primary">×”×•×¡×£</button>
    </div>
  </header>
  
  <!-- ×§×•××¤×•× × ×˜×” - ×—×•×–×¨×ª -->
  <div class="users-grid">
    {#each users as user}
      <!-- ×§×•××¤×•× × ×˜×” - ×—×•×–×¨×ª -->
      <div class="user-card">
        <!-- Tailwind - ×¤×©×•×˜ -->
        <div class="flex gap-2 items-center">
          <span class="text-sm font-medium">{user.name}</span>
        </div>
      </div>
    {/each}
  </div>
</div>
```

#### ×›×œ×œ×™× ×˜×›× ×™×™×:

1. **@import ×—×•×‘×”**: `settings.css` ×¦×¨×™×š `@import '../layout.css';` ×‘×¨××©
2. **@reference ×¨×§ ×¢× @apply**: ×”×•×¡×£ `@reference "tailwindcss";` ×‘-`<style>` ×¨×§ ×× ×™×© `@apply`
3. **×œ× ×¦×¨×™×š CDN**: ××™×Ÿ ×¦×•×¨×š ×‘-Tailwind CDN script ×‘-`+layout.svelte`

#### ×›×œ×œ ×§×¨×™×˜×™ - HTML vs `<style>`:

**×× ××¤×©×¨ ×œ×©×™× ×‘-HTML â†’ ×ª××™×“ HTML ×™×©×™×¨×•×ª!**

```svelte
<!-- âœ… × ×›×•×Ÿ - ×‘-HTML -->
<div class="flex gap-2 mt-4">
  <span class="text-sm">×˜×§×¡×˜</span>
</div>

<!-- âŒ ×œ× × ×›×•×Ÿ - ××™×•×ª×¨! -->
<style>
  .my-wrapper {
    @apply flex gap-2 mt-4;
  }
</style>
<div class="my-wrapper">...</div>
```

**×× ×—×™×™×‘×™× `<style>` (nested, override) â†’ ×ª××™×“ @apply!**

```svelte
<!-- âœ… × ×›×•×Ÿ - @apply ×‘-style -->
<style>
  @reference "tailwindcss";
  
  .modal-content h3 {
    @apply text-center text-2xl mb-8;
  }
</style>

<!-- âŒ ×œ× × ×›×•×Ÿ - CSS ×¨×’×™×œ ×‘-style -->
<style>
  .modal-content h3 {
    text-align: center;
    font-size: 1.5rem;
    margin-bottom: 2rem;
  }
</style>
```

**×”×›×œ×œ ×”×–×”×‘**: ×›×œ Tailwind utility ×©× ××¦× ×‘-`<style>` **×—×™×™×‘** ×œ×”×™×•×ª ×“×¨×š `@apply`!

#### ×˜×¢×•×™×•×ª × ×¤×•×¦×•×ª:

```svelte
<!-- âŒ ×œ× × ×›×•×Ÿ - ×™×¦×™×¨×ª class ×œ×›×œ ×“×‘×¨ ×§×˜×Ÿ -->
<style>
  @reference "tailwindcss";
  
  .flex-gap-2 {
    @apply flex gap-2;
  }
  
  .text-small {
    @apply text-sm;
  }
</style>

<!-- âœ… × ×›×•×Ÿ - Tailwind ×™×©×™×¨×•×ª -->
<div class="flex gap-2">
  <span class="text-sm">×˜×§×¡×˜</span>
</div>

<!-- âŒ ×œ× × ×›×•×Ÿ - Tailwind utilities ×œ××©×”×• ×©×—×•×–×¨ 10 ×¤×¢××™× -->
{#each items as item}
  <div class="bg-white border border-slate-200 rounded-2xl p-6 flex flex-col items-center gap-4 shadow-md">
    <!-- ×—×•×–×¨ 10 ×¤×¢××™×! ×¦×¨×™×š .item-card ×‘-settings.css -->
  </div>
{/each}

<!-- âœ… × ×›×•×Ÿ - ×§×•××¤×•× × ×˜×” ×‘-settings.css -->
{#each items as item}
  <div class="item-card">
    <!-- ... -->
  </div>
{/each}

<!-- âŒ ×œ× × ×›×•×Ÿ - @apply ×‘×œ×™ @reference -->
<style>
  .my-class {
    @apply flex gap-2; /* ×œ× ×™×¢×‘×•×“! -->
  }
</style>

<!-- âœ… × ×›×•×Ÿ - ×¢× @reference -->
<style>
  @reference "tailwindcss";
  
  .my-class {
    @apply flex gap-2;
  }
</style>
```

### ××•×“×™×•

**×—×œ ××™×¡×•×¨ ××•×—×œ×˜ ×¢×œ Oscillators!**

```typescript
// âœ… × ×›×•×Ÿ
audioService.play('/sounds/praise.mp3');

// âŒ ××¡×•×¨!
const oscillator = audioContext.createOscillator();
```

- ×¨×§ ×§×‘×¦×™ MP3/WAV ×-`static/sounds/`
- ×œ×•×’×™×§×” ×¨×§ ×‘-`boosts.ts` / Controllers
- ×§×‘×¦×™× ×œ× ×‘×©×™××•×© â†’ `unused_sounds/`

### ××™×’×¨×¦×™×•×ª

**×›×œ ×©×™× ×•×™ ×‘-AppState = ×’×¨×¡×” ×—×“×©×”!**

1. ×¢×“×›×Ÿ `types.ts`
2. ×”×•×¡×£ ××™×’×¨×¦×™×” ×‘-`migration.ts`
3. ×¢×“×›×Ÿ ×’×¨×¡×” ×‘-`defaults.ts`
4. ×ª××™×›×” ×œ××—×•×¨ ×—×•×‘×”!

**×’×¨×¡×” × ×•×›×—×™×ª:** 7

---

## âš ï¸ ×˜×¢×•×™×•×ª × ×¤×•×¦×•×ª

### 1. ×œ×•×’×™×§×” ×‘-Component âŒ

```svelte
<!-- âŒ -->
<script>
  function handleToggle(taskId) {
    const task = tasks.find(t => t.id === taskId);
    // ... ×œ×•×’×™×§×” ××•×¨×›×‘×ª = ××¡×•×¨!
  }
</script>

<!-- âœ… -->
<script>
  const controller = new TasksBoardController();
</script>
<button onclick={() => controller.toggleTask(task.id)} />
```

### 2. ×˜×§×¡×˜×™× ×§×©×™×—×™× âŒ

```svelte
<!-- âŒ -->
<h1>×”×’×“×¨×•×ª ××¢×¨×›×ª</h1>

<!-- âœ… -->
<script>
  import { TEXTS } from '$lib/services/language';
</script>
<h1>{TEXTS.SETTINGS_TITLE}</h1>
```

### 3. Scale ××•×—×œ×˜ âŒ

```typescript
// âŒ scale ××•×—×œ×˜ (×ª×œ×•×™ ×‘×’×•×“×œ!)
crop = { x: 50, y: 50, scale: 0.333 };

// âœ… scale ×™×—×¡×™
crop = { x: 50, y: 50, scale: 1.4 }; // ×¤×™ 1.4 ×-minScale
```

### 4. ×’×™×©×” ×™×©×™×¨×” ×œ×ª××•× ×•×ª âŒ

```svelte
<!-- âŒ -->
<img src={task.imageSrc} alt={task.name} />

<!-- âœ… -->
<ImageDisplay imageSrc={task.imageSrc} alt={task.name} />
```

### 5. $derived ×¢×œ naturalWidth âŒ

```typescript
// âŒ $derived ×œ× ××ª×¢×“×›×Ÿ!
let minScale = $derived.by(() => {
  return containerSize / imageRef.naturalWidth;
});

// âœ… ×—×™×©×•×‘ ×‘-handleLoad
let minScale = $state(1);
function handleLoad() {
  minScale = containerSize / imageRef.naturalWidth;
}
```

---

## ğŸ”„ ×ª×”×œ×™×š ×¢×‘×•×“×” (Workflow)

### ××©×™××” ×—×“×©×”

1. **×”×‘× ×ª ×”×§×©×¨:**
   - ×›×œ ×”×”×§×©×¨ ×”×“×¨×•×© × ××¦× ×‘××¡××š ×–×”
   - ×¢×™×™×Ÿ ×‘-`walkthrough.md` (××” × ×¢×©×” ×œ××—×¨×•× ×”)
   - ×‘××™×“×ª ×”×¦×•×¨×š: [agent-guide-extended.mdc](agent-guide-extended.mdc)

2. **×ª×›× ×•×Ÿ:**
   - ×¦×¨×™×š Controller ×—×“×©?
   - ×¦×¨×™×š ×©×“×•×ª ×—×“×©×™×?
   - ×¦×¨×™×š ××™×’×¨×¦×™×”?

3. **×™×™×©×•×:**
   - 3 ×©×›×‘×•×ª: Data â†’ Logic â†’ View
   - Controllers ×œ× Components
   - ×˜×§×¡×˜×™× ×‘-language.ts

4. **×‘×“×™×§×”:**
   - `npm run check`
   - ×‘×“×™×§×” ×‘×“×¤×“×¤×Ÿ
   - ReadLints

5. **×ª×™×¢×•×“:**
   - **×¢×“×›×Ÿ `walkthrough.md`** (×—×•×‘×”!)
   - ×¢×“×›×Ÿ `features-status.md` (×× ×”×•×©×œ×)

6. **Commit:**
   - ×¨×§ ×× ×”××©×ª××© ×‘×™×§×©!
   - ×”×•×“×¢×” ×‘×¢×‘×¨×™×ª
   - ×§×‘×¦×™× ×¡×œ×§×˜×™×‘×™×™×

---

## ğŸ“‹ Checklist ×œ×¤× ×™ Commit

- [ ] `npm run check` ×¢×‘×¨
- [ ] ReadLints ×¢×œ ×§×‘×¦×™× ×©×©×™× ×™×ª
- [ ] ×‘×“×™×§×” ×‘×“×¤×“×¤×Ÿ
- [ ] **×¢×“×›× ×ª×™ `walkthrough.md`**
- [ ] ×¢×“×›× ×ª×™ `features-status.md` (×× ×¨×œ×•×•× ×˜×™)
- [ ] ×›×œ ×”×˜×§×¡×˜×™× ×‘-`language.ts`
- [ ] ×›×œ ×”× ×ª×•× ×™× ×‘-`defaults.ts`
- [ ] ×”×¢×¨×•×ª ×‘×¢×‘×¨×™×ª
- [ ] ×©××•×ª ××©×ª× ×™× ×‘×× ×’×œ×™×ª
- [ ] ×ª××•× ×•×ª ×“×¨×š `ImageDisplay` ×‘×œ×‘×“

---

## ğŸ“ ××•×©×’×™× ×¤×“×’×•×’×™×™× - ×¨×§×¢ ×—×©×•×‘

### ××§×•×œ×œ×™×” (Echolalia)

×—×–×¨×ª×™×•×ª ×¢×œ ××™×œ×™×/××©×¤×˜×™×. ×“×•×’××”: ×™×•× ×ª×Ÿ ×—×•×–×¨ ×¢×œ "×©×•×ª×” ××™× ×¢× ×”×œ×©×•×Ÿ".

**×”×©×œ×›×”:** ××©×•×‘ ×¨× ×“×•××œ×™ ×œ×× ×™×¢×ª ×§×™×‘×¢×•×Ÿ!

### "×œ×•×¤×™×" (Loops)

×›× ×™×¡×” ×œ××¦×‘ ×—×–×¨×” ××•×‘×¡×¡×™×‘×™×ª. ×“×•×’××”: ×‘×§×©×” ×—×•×–×¨×ª ×œ-"×–×” ×–×”" (×™×•×˜×™×•×‘).

**×”×©×œ×›×”:** Kiosk Mode + Distraction-free design

### TEACCH

×’×™×©×” ×—×™× ×•×›×™×ª: ××‘× ×” + ×•×™×–×•××œ×™×–×¦×™×” + × ×™×‘×•×™ = ×•×“××•×ª ×•×¡×“×¨

---

## ğŸš€ ×¤×§×•×“×•×ª × ×¤×•×¦×•×ª

```bash
# Development
npm install
npm run dev
npm run check

# Git
git status
git diff
git add [files]  # ×œ× git add .!
git commit -m "×”×•×“×¢×” ×‘×¢×‘×¨×™×ª"

# Deployment
npm run build
npm run deploy
```

---

## ğŸ¯ ×”×›×œ×œ×™× ×”×—×©×•×‘×™× ×‘×™×•×ª×¨

### ××¨×›×™×˜×§×˜×•×¨×”

1. **3 ×©×›×‘×•×ª**: Data â†’ Logic â†’ View
2. **Controllers Topic-Based**: ×œ× Page-Based
3. **×”×¤×¨×“×ª ×œ×•×’×™×§×”**: ×ª×¦×•×’×” ×‘×§×•××¤×•× × ×˜×”, ×œ×•×’×™×§×” ×‘-Controller
4. **SSOT**: defaults.ts, language.ts

### × ×ª×•× ×™×

1. **Normalized**: AppState.images ××¨×›×–×™
2. **Scale ×™×—×¡×™**: ×œ× ××•×—×œ×˜
3. **Migration**: ×›×œ ×©×™× ×•×™ = ×’×¨×¡×” ×—×“×©×”
4. **Backward Compatibility**: ×ª××™×“!

### ×ª××•× ×•×ª

1. **ImageDisplay ×‘×œ×‘×“**: ××™×Ÿ ×’×™×©×” ×™×©×™×¨×”!
2. **Parent ×§×•×‘×¢ ×’×•×“×œ**: ImageDisplay ××ª××™×
3. **Crop ×™×—×¡×™**: 1.0 = minScale

### ×ª×™×¢×•×“

1. **walkthrough.md**: ×¢×“×›×Ÿ **×›×œ ××©×™××”** (×—×•×‘×”!)
2. **features-status.md**: ×¨×§ ×›×©×”×•×©×œ×
3. **×¤×•×¨××˜ ××—×™×“**: ×¢×§×•×‘ ××—×¨×™ ×“×•×’×××•×ª

### ××•×“×™×•

1. **MP3/WAV ×‘×œ×‘×“**: ××™×Ÿ Oscillators!
2. **Hybrid**: MP3 â†’ TTS fallback
3. **Random**: ××©×•×‘ ×¨× ×“×•××œ×™
4. **Centralized**: ×œ×•×’×™×§×” ×‘-Services

---

## ğŸ“– ××¡××›×™× × ×•×¡×¤×™×

### ××¡××›×™× ×œ×§×¨×™××”

- **`README.md`** - ×¡×§×™×¨×” ×›×œ×œ×™×ª
- **`walkthrough.md`** - ××” × ×¢×©×” ×¢×“ ×›×”
- **`features-status.md`** - ××” ×›×‘×¨ ×§×™×™×
- **[agent-guide-extended.mdc](agent-guide-extended.mdc)** - ××“×¨×™×š ××•×¨×—×‘ (××•×¤×¦×™×•× ×œ×™)

### ×”×¤× ×™×•×ª ××”×™×¨×•×ª

- **××‘× ×” ×ª×™×§×™×•×ª ××¤×•×¨×˜** â†’ agent-guide-extended.mdc
- **×“×•×’×××•×ª ×§×•×“ ××œ××•×ª** â†’ agent-guide-extended.mdc
- **FAQ** â†’ agent-guide-extended.mdc
- **×˜×¢×•×™×•×ª × ×¤×•×¦×•×ª ××•×¨×—×‘** â†’ agent-guide-extended.mdc

---

**×–×›×•×¨:** ×”×ª×™×¢×•×“ ×”×•× ×—×œ×§ ×‘×œ×ª×™ × ×¤×¨×“ ××”×¢×‘×•×“×”. ×¢×“×›×Ÿ `walkthrough.md` ×ª××™×“! ğŸ‰
