<!DOCTYPE html>
<html lang="he">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lit Daily Schedule</title>

    <style>
        body {
            margin: 0;
            background-color: #f4f7f9;
            font-family: "Segoe UI", sans-serif;
            padding: 20px;
        }
    </style>

    <script type="module">
        import {
            LitElement,
            html,
            css,
        } from "https://cdn.jsdelivr.net/gh/lit/dist@3/core/lit-core.min.js";

        const cssStyles = css`
          :host {
            --bg-color: #f4f7f9;
            --primary: #3b82f6;
            --border-color: #e2e8f0;
            --danger: #ef4444;
            --success: #22c55e;

            display: block;
            direction: rtl;
          }

          .schedule-container {
            max-width: 550px;
            margin: 0 auto; /* Centered in host */
            background: #fff;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            color: #333;
          }

          h1 {
            text-align: center;
            color: #2c3e50;
            margin-top: 0;
          }

          .add-form {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #f0f2f5;
          }
          .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
          }
          .grow {
            flex-grow: 1;
          }

          input {
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
          }

          button.add-btn {
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            height: 48px;
            font-weight: bold;
            font-family: inherit;
          }

          ul {
            list-style: none;
            padding: 0;
            margin: 0;
          }

          .task-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border-color);
            margin-bottom: 0.75rem;
            border-radius: 12px;
            background: #fff;
          }

          .task-item.completed {
            background-color: #f8fafc;
          }
          .task-item.completed .task-name {
            text-decoration: line-through;
            color: #94a3b8;
          }

          .task-details {
            flex-grow: 1;
            margin-right: 1rem;
          }

          .task-time {
            font-family: monospace;
            background: #f1f5f9;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            margin-left: 1rem;
            font-size: 0.9rem;
          }

          .delete-btn {
            background: transparent;
            border: none;
            color: var(--danger);
            font-size: 1.2rem;
            cursor: pointer;
          }

          /* Checkbox Style */
          .checkbox-container {
            position: relative;
            padding-left: 30px; /* Space for LTR checkbox logic if needed, but in RTL might need adjustment? CSS logical props are safer but sticking to original pixel perfect usually works better if verified. Original was RTL page with padding-left 30px. */
            cursor: pointer;
            display: block;
            width: 24px;
            height: 24px;
          }
          /* Fix for RTL checkbox positioning if needed. The original had padding-left: 30px; and cheekmark at left:0.
             In RTL, left is still left. So this implies the checkbox is on the left side of the text?
             Wait, in RTL 'padding-left' adds space on the left. 'left:0' puts element on left.
             If the list item is RTL, the items start from right.
             The original code structure: Checkbox -> Details -> DeleteBtn.
             Flex flow is row.
             In RTL: Start is Right.
             Original: Checkbox (first child) appears on Right?
             Let's check the original HTML again.
             <li class="task-item">
                <label checkbox>...</label>
                <div details>...</div>
                <button delete>...</button>
             </li>
             If RTL: First item (checkbox) is on the Right.
             But the CSS says: .checkbox-container { padding-left: 30px; } .checkmark { left: 0; }
             If this is on the Right, 'left: 0' puts the checkmark on the far Left of the container?
             That sounds like the checkbox label is 30px + width, and checkmark is on the left side of that label.
             If the label is on the right side of the row, this CSS puts the visual box on the left of the invisible input?
             Actually, let's keep the CSS verbatim as it worked in the original RTL file.
          */

          .checkbox-container input {
            opacity: 0;
            position: absolute;
            width: 0;
            height: 0;
          }
          .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 24px;
            width: 24px;
            background-color: var(--border-color);
            border-radius: 6px;
          }
          input:checked ~ .checkmark {
            background-color: var(--success);
          }
          input:checked ~ .checkmark:after {
            content: "";
            position: absolute;
            display: block;
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            transform: rotate(45deg);
          }
        `;

        class DailySchedule extends LitElement {
            static properties = {
                tasks: { state: true },
            };

            static styles = cssStyles;

                constructor() {
                super();
                this.tasks = [];
            }

            _addTask(e) {
                e.preventDefault();
                const nameInput = this.shadowRoot.getElementById("taskInput");
                const timeInput = this.shadowRoot.getElementById("timeInput");

                const name = nameInput.value.trim();
                const time = timeInput.value;

                if (!name || !time) return;

                this.tasks = [
                    ...this.tasks,
                    { id: crypto.randomUUID(), name, time, completed: false },
                ];

                nameInput.value = "";
                timeInput.value = "";
            }

            _toggleTask(task) {
                this.tasks = this.tasks.map((t) =>
                    t.id === task.id ? { ...t, completed: !t.completed } : t
                );
            }

            _deleteTask(id) {
                this.tasks = this.tasks.filter((t) => t.id !== id);
            }

            render() {
                const sortedTasks = [...this.tasks].sort((a, b) =>
                    a.time.localeCompare(b.time)
                );

                return html`
            <div class="schedule-container">
              <h1>ğŸ“… ×¡×“×¨ ×”×™×•× ×©×œ×™</h1>

              <form class="add-form" @submit="${this._addTask}">
                <div class="input-group grow">
                  <label>××” ×‘×ª×›× ×•×Ÿ?</label>
                  <input
                    id="taskInput"
                    type="text"
                    placeholder="×œ×“×•×’××”: ×¤×’×™×©×ª ×¦×•×•×ª"
                    required
                  />
                </div>
                <div class="input-group">
                  <label>×©×¢×”</label>
                  <input id="timeInput" type="time" required />
                </div>
                <button type="submit" class="add-btn">×”×•×¡×£ +</button>
              </form>

              <ul>
                ${sortedTasks.map(
                    (task) => html`
                    <li class="task-item ${task.completed ? "completed" : ""}">
                      <!-- Note order changes visually in RTL, DOM order matters -->
                      <label class="checkbox-container">
                        <input
                          type="checkbox"
                          .checked="${task.completed}"
                          @change="${() => this._toggleTask(task)}"
                        />
                        <span class="checkmark"></span>
                      </label>

                      <div class="task-details">
                        <span class="task-time">${task.time}</span>
                        <span class="task-name">${task.name}</span>
                      </div>

                      <button
                        class="delete-btn"
                        @click="${() => this._deleteTask(task.id)}"
                      >
                        âœ•
                      </button>
                    </li>
                  `
                )}
              </ul>
            </div>
          `;
            }
        }

        customElements.define("daily-schedule", DailySchedule);
    </script>
</head>

<body>
    <!-- Using the component -->
    <daily-schedule></daily-schedule>
</body>

</html>